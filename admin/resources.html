<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>资源管理 - 后台管理系统</title>
    <link rel="stylesheet" href="admin.css">
</head>
<body class="admin-body">
    <script src="js/sidebar-loader.js"></script>
    <script>loadSidebar('resources');</script>

    <!-- 主内容区 -->
    <main class="main-content">
        <!-- 顶部导航 -->
        <header class="admin-header" id="adminHeader">
            <div class="header-left">
                <button class="menu-toggle" id="menuToggle" title="切换侧边栏">
                    <span class="menu-icon">☰</span>
                </button>
                <button class="collapse-toggle" id="collapseToggle" title="收起/展开侧边栏">
                    <span class="collapse-icon" id="collapseIcon">⮜</span>
                </button>
                <h1 id="pageTitle">资源管理</h1>
            </div>
            <div class="header-right">
                <div class="header-actions">
                    <button class="action-btn" id="notificationsBtn" title="通知">
                        <span class="action-icon">🔔</span>
                        <span class="notification-badge" id="notificationCount">0</span>
                    </button>
                    <button class="action-btn" id="helpBtn" title="帮助">
                        <span class="action-icon">❓</span>
                    </button>
                </div>
                <div class="user-info">
                    <div class="user-avatar">👤</div>
                    <div class="user-details">
                        <span class="username" id="headerUsername">管理员</span>
                        <div class="user-dropdown">
                            <button class="dropdown-toggle" id="userDropdownToggle">▼</button>
                            <div class="dropdown-menu" id="userDropdownMenu">
                                <a href="#" class="dropdown-item" id="profileLink">个人资料</a>
                                <a href="#" class="dropdown-item" id="settingsLink">设置</a>
                                <div class="dropdown-divider"></div>
                                <a href="#" class="dropdown-item" id="logoutBtn">退出登录</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- 工具栏 -->
        <section class="toolbar">
            <div class="toolbar-left">
                <div class="search-box">
                    <input type="text" id="searchInput" placeholder="搜索资源...">
                    <button class="search-btn">🔍</button>
                </div>
                <select id="categoryFilter" class="filter-select">
                    <option value="">全部分类</option>
                    <option value="technical">技术成果</option>
                    <option value="funding">基金申报书</option>
                    <option value="research">研究报告</option>
                    <option value="software">软件手册</option>
                    <option value="teaching">教学材料</option>
                </select>
                <select id="statusFilter" class="filter-select">
                    <option value="">全部状态</option>
                    <option value="active">已发布</option>
                    <option value="inactive">未发布</option>
                </select>
            </div>
            <div class="toolbar-right">
                <button class="add-btn" id="addResourceBtn">➕ 添加资源</button>
            </div>
        </section>

        <!-- 资源列表 -->
        <section class="content-section">
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>资源信息</th>
                            <th>分类</th>
                            <th>文件大小</th>
                            <th>下载次数</th>
                            <th>状态</th>
                            <th>上传时间</th>
                            <th>操作</th>
                        </tr>
                    </thead>
                    <tbody id="resourcesTableBody">
                        <!-- 资源列表将通过JavaScript动态生成 -->
                    </tbody>
                </table>
            </div>
        </section>

        <!-- 分页 -->
        <section class="content-section">
            <div class="pagination">
                <button class="page-btn" onclick="changePage(-1)">上一页</button>
                <span class="page-info" id="pageInfo">第 1 页，共 1 页</span>
                <button class="page-btn" onclick="changePage(1)">下一页</button>
            </div>
        </section>
    </main>

    <!-- 添加/编辑资源模态框 -->
    <div class="modal" id="resourceModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">添加资源</h2>
                <button class="close-btn" id="closeModal">&times;</button>
            </div>
            <form id="resourceForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="resourceTitle">资源标题 *</label>
                        <input type="text" id="resourceTitle" name="title" required>
                    </div>
                    <div class="form-group">
                        <label for="resourceCategory">分类 *</label>
                        <select id="resourceCategory" name="category" required>
                            <option value="">请选择分类</option>
                            <option value="technical">技术成果</option>
                            <option value="funding">基金申报书</option>
                            <option value="research">研究报告</option>
                            <option value="software">软件手册</option>
                            <option value="teaching">教学材料</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="resourceDescription">资源描述</label>
                    <textarea id="resourceDescription" name="description" rows="4" placeholder="请输入资源描述..."></textarea>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="resourceFile">上传文件 *</label>
                        <input type="file" id="resourceFile" name="file" accept=".pdf,.doc,.docx,.ppt,.pptx,.xls,.xlsx,.zip,.rar" required>
                    </div>
                    <div class="form-group">
                        <label for="resourceStatus">状态</label>
                        <select id="resourceStatus" name="status">
                            <option value="active">已发布</option>
                            <option value="inactive">未发布</option>
                        </select>
                    </div>
                </div>
                <div class="form-actions">
                    <button type="button" class="cancel-btn" id="cancelBtn">取消</button>
                    <button type="submit" class="save-btn">保存</button>
                </div>
            </form>
        </div>
    </div>

    <script src="resources.js"></script>
</body>
</html> 